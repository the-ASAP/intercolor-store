{"version":3,"file":"CatalogApp.bundle.js","sources":["../src/store/store.js","../src/components/CatalogPage/CatalogPage.js","../src/CatalogApp.js"],"sourcesContent":["import { createPinia, defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const store = createPinia();\r\n\r\nexport const useCatalogStore = defineStore('catalog', {\r\n  state: () => ({\r\n    query: '',\r\n    products: [],\r\n    filter: {\r\n      availability: [],\r\n      price: { min: 0, max: Infinity, ranges: [] },\r\n      properties: [],\r\n      delivery: [],\r\n    },\r\n    sort: '',\r\n    pagination: {\r\n      currentPage: 1,\r\n      totalPages: 1,\r\n    },\r\n    loading: false,\r\n  }),\r\n  getters: {\r\n    sorted() {\r\n      console.log('computed');\r\n      return this.products.slice().sort((a, b) => a.id - b.id);\r\n    },\r\n  },\r\n  actions: {\r\n    send() {\r\n      console.log('send');\r\n      return this.products.push({\r\n        id: this.products.length,\r\n        name: `товар${this.products.length}`,\r\n      });\r\n    },\r\n    async fetchStore() {\r\n      console.log('fetch');\r\n      await fetch('https://managers.intercolor.asap-lp.ru/api/v1/catalog/')\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          this.products = data.section[169].items;\r\n        });\r\n    },\r\n  },\r\n});\r\n","import { mapActions, mapState } from 'ui.vue3.pinia';\r\nimport { useCatalogStore } from '../../store/store';\r\n\r\nexport const CatalogPage = {\r\n  props: {\r\n    params: {\r\n      type: Object,\r\n      default: () => ({}),\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState(useCatalogStore, ['products', 'sorted']),\r\n  },\r\n  methods: {\r\n    ...mapActions(useCatalogStore, ['send']),\r\n  },\r\n  template: `\r\n  <div v-for=\"{id, name} in products\" :key=\"id\">\r\n    <div>{{id}}</div>\r\n    <div>{{name}}</div>\r\n  </div>\r\n  <hr/>\r\n  <div v-for=\"{id, name} in sorted\" :key=\"id\">\r\n    <div>{{id}}</div>\r\n    <div>{{name}}</div>\r\n  </div>\r\n  <button @click=\"send\">sendbtn</button>\r\n  `,\r\n};\r\n","import { BitrixVue } from 'ui.vue3';\nimport { mapActions } from 'ui.vue3.pinia';\nimport { CatalogPage } from './components/CatalogPage/CatalogPage';\nimport { store, useCatalogStore } from './store/store';\n\nexport class CatalogApp {\n  #app;\n  #data;\n\n  constructor(rootNode, data) {\n    this.rootNode = document.querySelector(rootNode);\n    this.#data = data;\n  }\n\n  init() {\n    this.initApp();\n  }\n\n  initApp() {\n    const context = this;\n\n    this.#app = BitrixVue.createApp({\n      name: 'CatalogApp',\n      components: {\n        CatalogPage,\n      },\n      data() {\n        return {\n          params: context.#data,\n        };\n      },\n      methods: {\n        ...mapActions(useCatalogStore, ['fetchStore']),\n      },\n      beforeCreate() {\n        this.$bitrix.Application.set(context);        \n      },\n      created() {\n        this.fetchStore();\n      },\n      template: `<CatalogPage :params='params'/>`,\n    });\n    this.#app.use(store);\n    this.#app.mount(this.rootNode);\n  }\n}\n"],"names":["store","createPinia","useCatalogStore","defineStore","state","query","products","filter","availability","price","min","max","Infinity","ranges","properties","delivery","sort","pagination","currentPage","totalPages","loading","getters","sorted","console","log","this","slice","a","b","id","actions","send","push","length","name","fetchStore","_context","fetch","then","res","json","data","_this","section","items","CatalogPage","props","params","type","Object","default","computed","mapState","methods","mapActions","template","CatalogApp","rootNode","babelHelpers","_classPrivateFieldInitSpec","writable","value","document","querySelector","key","initApp","context","BitrixVue","createApp","components","beforeCreate","$bitrix","Application","set","created","use","mount"],"mappings":"unNAEO,IAAMA,EAAQC,gBAERC,EAAkBC,cAAY,UAAW,CACpDC,MAAO,WAAA,MAAO,CACZC,MAAO,GACPC,SAAU,GACVC,OAAQ,CACNC,aAAc,GACdC,MAAO,CAAEC,IAAK,EAAGC,IAAKC,EAAAA,EAAUC,OAAQ,IACxCC,WAAY,GACZC,SAAU,IAEZC,KAAM,GACNC,WAAY,CACVC,YAAa,EACbC,WAAY,GAEdC,SAAS,IAEXC,QAAS,CACPC,kBAEE,OADAC,QAAQC,IAAI,YACLC,KAAKnB,SAASoB,QAAQV,MAAK,SAACW,EAAGC,GAAC,OAAKD,EAAEE,GAAKD,EAAEC,QAGzDC,QAAS,CACPC,gBAEE,OADAR,QAAQC,IAAI,QACLC,KAAKnB,SAAS0B,KAAK,CACxBH,GAAIJ,KAAKnB,SAAS2B,OAClBC,oBAAcT,KAAKnB,SAAS2B,WAG1BE,sBAAa,WAAA,4DAAA,6BAAA,6BAAA,OACI,OAArBZ,QAAQC,IAAI,SAASY,SACfC,MAAM,0DACTC,MAAK,SAACC,GAAG,OAAKA,EAAIC,UAClBF,MAAK,SAACG,GACLC,EAAKpC,SAAWmC,EAAKE,QAAQ,KAAKC,SAClC,OAAA,UAAA,ynBCtCH,IAAMC,EAAc,CACzBC,MAAO,CACLC,OAAQ,CACNC,KAAMC,OACNC,QAAS,WAAA,MAAO,MAGpBC,cACKC,WAASlD,EAAiB,CAAC,WAAY,YAE5CmD,aACKC,aAAWpD,EAAiB,CAAC,UAElCqD,ugCCbqD,gCAE1CC,aAIX,WAAYC,EAAUhB,GAAMiB,oCAAAC,UAAAC,YAAAC,eAAAF,UAAAC,YAAAC,eAC1BpC,KAAKgC,SAAWK,SAASC,cAAcN,GACvCC,yCAAajB,GAiCd,OAhCAiB,6BAAAM,WAAAH,iBAGCpC,KAAKwC,aACND,cAAAH,iBAGC,IAAMK,EAAUzC,KAEhBiC,yCAAYS,YAAUC,UAAU,CAC9BlC,KAAM,aACNmC,WAAY,CACVxB,YAAAA,GAEFJ,gBACE,MAAO,CACLM,yCAAQmB,OAGZb,aACKC,aAAWpD,EAAiB,CAAC,gBAElCoE,wBACE7C,KAAK8C,QAAQC,YAAYC,IAAIP,IAE/BQ,mBACEjD,KAAKU,cAEPoB,8CAEFG,0CAAUiB,IAAI3E,GACd0D,0CAAUkB,MAAMnD,KAAKgC"}