{"version":3,"file":"CatalogApp.bundle.js","sources":["../src/store/store.js","../src/components/Accordion/Accordion.js","../src/components/Filter/Filter.js","../src/components/Pagination/Pagination.js","../src/components/ProductList/ProductList.js","../src/components/Search/Search.js","../src/components/Select/Select.js","../src/components/CatalogPage/CatalogPage.js","../src/CatalogApp.js"],"sourcesContent":["import { createPinia, defineStore } from 'ui.vue3.pinia';\r\n\r\nexport const store = createPinia();\r\n\r\nexport const useCatalogStore = defineStore('catalog', {\r\n  state: () => ({\r\n    query: '',\r\n    products: [],\r\n    filter: {},\r\n    filters: {\r\n      brands: {},\r\n      delivery: '',\r\n    },\r\n    sorting: {},\r\n    sort: '',\r\n    pagination: {\r\n      currentPage: 1,\r\n    },\r\n    loading: false,\r\n  }),\r\n  getters: {\r\n    getParams(state) {\r\n      return {\r\n        query: state.query,\r\n        sort: state.sort,\r\n        page: state.pagination.currentPage,\r\n        filters: state.filters,\r\n      };\r\n    },\r\n  },\r\n  actions: {\r\n    async fetchCatalog(params = this.getParams) {\r\n      this.loading = true;\r\n\r\n      try {\r\n        const url = this.buildUrl(params);\r\n        console.log(url);\r\n        const responce = await fetch(url);\r\n        const data = await responce.json();\r\n\r\n        this.products = data.items;\r\n        this.sorting = data.sorting;\r\n        this.filter = data.filter;\r\n        this.pagination = data.pagination;\r\n\r\n        console.log(data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    buildUrl({ query, sort, page, filters }) {\r\n      const params = new URLSearchParams();\r\n      if (query) params.append('q', query);\r\n      if (sort) params.append('sort', sort);\r\n      if (page) params.append('page', page);\r\n      if (filters) {\r\n        const brands = Object.keys(filters?.brands).join(',');\r\n        params.append('brands', brands);\r\n        params.append('delivery', filters.delivery);\r\n      }\r\n      return `https://managers.intercolor.asap-lp.ru/api/v1/catalog/section/?${params.toString()}`;\r\n    },\r\n\r\n    setQuery(query) {\r\n      if (this.query === query) return;\r\n      this.query = query;\r\n      this.pagination.currentPage = 1;\r\n      if (query) {\r\n        this.fetchCatalog();\r\n      }\r\n    },\r\n\r\n    setPage(page) {\r\n      if (this.pagination.currentPage === page) return;\r\n      this.pagination.currentPage = page;\r\n      this.fetchCatalog();\r\n    },\r\n\r\n    setSort(option) {\r\n      if (this.sort === option.name) return;\r\n      this.pagination.currentPage = 1;\r\n      this.sort = option.name;\r\n      this.fetchCatalog();\r\n    },\r\n\r\n    setFliters(filters) {\r\n      // if (JSON.stringify(this.filters) === JSON.stringify(filters)) {\r\n      //   return;\r\n      // }\r\n      console.log('setFliters', filters);\r\n      this.filters = filters;\r\n      this.pagination.currentPage = 1;\r\n      this.fetchCatalog();\r\n    },\r\n  },\r\n});\r\n","import './Accordion.css';\r\n\r\nexport const Accordion = {\r\n  data() {\r\n    return {\r\n      isOpen: true,\r\n    };\r\n  },\r\n  methods: {\r\n    toggleAccordeon() {\r\n      this.isOpen = !this.isOpen;\r\n    },\r\n  },\r\n  template: `\r\n    <div class=\"accordion\" :class=\"{'accordion--active': isOpen}\">\r\n      <div class=\"accordion__header\" @click=\"toggleAccordeon\">\r\n        <slot name=\"title\"/>\r\n        <svg class=\"accordion__icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n          <path d=\"M8 10L12 14L16 10\" stroke=\"#323232\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n        </svg>\r\n      </div>\r\n      <div class=\"accordion__container\">\r\n        <slot name=\"content\"/>        \r\n      </div>\r\n    </div>\r\n  `,\r\n};\r\n","import { Accordion } from '../Accordion/Accordion';\r\nimport './Filter.css';\r\n\r\nexport const Filter = {\r\n  components: {\r\n    Accordion,\r\n  },\r\n  props: {\r\n    filters: {\r\n      type: Object,\r\n      default: () => ({}),\r\n    },\r\n  },\r\n  emits: ['updateFilters'],\r\n  data() {\r\n    return {\r\n      selectedFilters: {\r\n        brands: {},\r\n        delivery: '',\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    onSelectFilter(key, value) {\r\n      switch (key) {\r\n        case 'brands':\r\n          if (this.selectedFilters[key][value]) {\r\n            delete this.selectedFilters[key][value];\r\n          } else {\r\n            this.selectedFilters[key][value] = value;\r\n          }\r\n          break;\r\n        default:\r\n          this.selectedFilters[key] = value;\r\n          break;\r\n      }\r\n    },\r\n    applyFilters() {\r\n      this.$emit('updateFilters', this.selectedFilters);\r\n    },\r\n  },\r\n  template: `\r\n    <div class=\"filter\">\r\n      <a class=\"filter__all-category\" href=\"\">\r\n        <svg class=\"filter__all-category-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\r\n          <path d=\"M7.08301 5.00065H17.083\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          <path d=\"M2.91699 5.00065H3.75033\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          <path d=\"M2.91699 10.0007H3.75033\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          <path d=\"M2.91699 15.0007H3.75033\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          <path d=\"M7.08301 10.0007H17.083\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          <path d=\"M7.08301 15.0007H17.083\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n        </svg>\r\n        Все категории\r\n      </a>\r\n      <Accordion class=\"filter__separator\">\r\n        <template #title>\r\n          <p>Бренд</p>\r\n        </template>\r\n        <template #content>\r\n          <div class=\"filter__group-container\">\r\n            <div class=\"v-checkbox\" v-for=\"filter in filters.manufacturer\" :key=\"filter.id\">\r\n              <label class=\"v-checkbox__label v-checkbox__input-wrap\">\r\n                <input class=\"v-checkbox__input\" type=\"checkbox\" name=\"brand\" :value=\"filter.name\" @change=\"onSelectFilter('brands', filter.name)\"/>\r\n                <svg class=\"v-checkbox__icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                  <path d=\"M20 6.5L9 17.5L4 12.5\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                </svg>\r\n                {{filter.name}}\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </Accordion>\r\n      <Accordion class=\"filter__separator\">\r\n        <template #title>\r\n          <p>Срок доставки</p>\r\n        </template>\r\n        <template #content>\r\n          <div class=\"filter__group-container\">\r\n            <div class=\"v-checkbox\" v-for=\"filter in filters.delivery\" :key=\"filter.id\">\r\n              <label class=\"v-checkbox__label v-checkbox__input-wrap\">\r\n                <input class=\"radio\" name=\"delivery\" type=\"radio\" :value=\"filter.value\" @change=\"onSelectFilter('delivery', filter.value)\"/>\r\n                {{filter.value}}\r\n              </label>\r\n            </div>\r\n          </div>          \r\n        </template>\r\n      </Accordion>\r\n      <div class=\"filter__buttons\">\r\n        <button class=\"btn btn--dark btn--text\" @click=\"applyFilters\">\r\n          Применить          \r\n        </button>\r\n        <button class=\"filter__button-reset btn btn--text\">\r\n          Сбросить\r\n        </button>\r\n      </div>\r\n    </div>\r\n  `,\r\n};\r\n","export const Pagination = {\r\n  props: {\r\n    pagination: {\r\n      type: Object,\r\n      default: () => ({}),\r\n    },\r\n  },\r\n  emits: ['updatePage'],\r\n  methods: {\r\n    onChangePage(page) {\r\n      if (\r\n        page == 0 ||\r\n        page > this.pagination.totalPages ||\r\n        this.pagination.currentPage == page\r\n      )\r\n        return;\r\n      this.$emit('updatePage', page);\r\n    },\r\n  },\r\n  template: `\r\n    <nav>\r\n      <ul class=\"pagination__list\">\r\n        <li>\r\n          <button class=\"page-btn page-btn--first\" @click=\"onChangePage(1)\">\r\n            <svg\r\n              width=\"20\"\r\n              height=\"20\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n              <path\r\n                d=\"M13.5 16L17.5 12L13.5 8\"\r\n                stroke=\"var(--color-stroke-dark)\"\r\n                stroke-width=\"1.5\"\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n              />\r\n              <path\r\n                d=\"M6.5 17L11.5 12L6.5 7\"\r\n                stroke=\"var(--color-stroke-dark)\"\r\n                stroke-width=\"1.5\"\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n              />\r\n            </svg>\r\n          </button>\r\n        </li>\r\n        <li>\r\n          <button class=\"page-btn page-btn--prev\" @click=\"onChangePage(pagination.currentPage - 1)\">\r\n            <svg\r\n              width=\"20\"\r\n              height=\"20\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n              <path\r\n                d=\"M8 10L12 14L16 10\"\r\n                stroke=\"var(--color-stroke-dark)\"\r\n                stroke-width=\"1.5\"\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n              />\r\n            </svg>\r\n          </button>\r\n        </li>\r\n\r\n        <li v-for=\"page in 5\">\r\n          <button class=\"page-btn\" :class=\"{'page-btn--active': page == pagination.currentPage }\" @click=\"onChangePage(page)\">{{page}}</button>\r\n        </li>\r\n\r\n        <li>\r\n          <div class=\"page-btn--ellipsis\">\r\n            <svg\r\n              width=\"20\"\r\n              height=\"20\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n              <path\r\n                d=\"M18.5027 18.5002C18.5027 18.7765 18.2788 19.0004 18.0025 19.0004C17.7263 19.0004 17.5023 18.7765 17.5023 18.5002C17.5023 18.224 17.7263 18 18.0025 18C18.2788 18 18.5027 18.224 18.5027 18.5002\"\r\n                stroke=\"var(--color-stroke-dark)\"\r\n                stroke-width=\"1.5\"\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n              />\r\n              <path\r\n                d=\"M12.5002 18.5002C12.5002 18.7765 12.2762 19.0004 12 19.0004C11.7237 19.0004 11.4998 18.7765 11.4998 18.5002C11.4998 18.224 11.7237 18 12 18C12.2762 18 12.5002 18.224 12.5002 18.5002\"\r\n                stroke=\"var(--color-stroke-dark)\"\r\n                stroke-width=\"1.5\"\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n              />\r\n              <path\r\n                d=\"M6.49773 18.5002C6.49773 18.7765 6.27378 19.0004 5.99752 19.0004C5.72127 19.0004 5.49731 18.7765 5.49731 18.5002C5.49731 18.224 5.72127 18 5.99752 18C6.27378 18 6.49773 18.224 6.49773 18.5002\"\r\n                stroke=\"var(--color-stroke-dark)\"\r\n                stroke-width=\"1.5\"\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        </li>\r\n\r\n        <li>\r\n          <button class=\"page-btn\" :class=\"{'page-btn--active': pagination.currentPage == pagination.totalPages }\" @click=\"onChangePage(pagination.totalPages)\">{{pagination.totalPages}}</button>\r\n        </li>\r\n\r\n        <li>\r\n          <button class=\"page-btn page-btn--next\" @click=\"onChangePage(pagination.currentPage + 1)\">\r\n            <svg\r\n              width=\"20\"\r\n              height=\"20\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n              <path\r\n                d=\"M8 10L12 14L16 10\"\r\n                stroke=\"var(--color-stroke-dark)\"\r\n                stroke-width=\"1.5\"\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n              />\r\n            </svg>\r\n          </button>\r\n        </li>\r\n        <li>\r\n          <button class=\"page-btn page-btn--last\" @click=\"onChangePage(pagination.totalPages)\">\r\n            <svg\r\n              width=\"20\"\r\n              height=\"20\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n              <path\r\n                d=\"M13.5 16L17.5 12L13.5 8\"\r\n                stroke=\"var(--color-stroke-dark)\"\r\n                stroke-width=\"1.5\"\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n              />\r\n              <path\r\n                d=\"M6.5 17L11.5 12L6.5 7\"\r\n                stroke=\"var(--color-stroke-dark)\"\r\n                stroke-width=\"1.5\"\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n              />\r\n            </svg>\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  `,\r\n};\r\n","import { mapActions, mapState } from 'ui.vue3.pinia';\r\nimport { useCatalogStore } from '../../store/store';\r\nimport { Pagination } from '../Pagination/Pagination';\r\nimport './ProductList.css';\r\n\r\nexport const ProductList = {\r\n  components: { Pagination },\r\n  computed: {\r\n    ...mapState(useCatalogStore, ['products', 'pagination']),\r\n  },\r\n  methods: {\r\n    ...mapActions(useCatalogStore, ['setPage']),\r\n  },\r\n  template: `\r\n    <div>      \r\n      <div v-if=\"products.length\" class=\"product-list\">\r\n        <ul class=\"\">\r\n          <li v-for=\"product in products\" :key=\"product.id\" class=\"list__item product-item\">\r\n            <div class=\"product-item__info\">\r\n              <div class=\"card card-thumb\">\r\n                <img\r\n                  class=\"card-thumb__img\"\r\n                  :src=\"product.image\"\r\n                  alt=\"\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <div class=\"product-item__title\">{{product.name}}</div>\r\n                <div class=\"product-item__sku caption\">Арт. {{product.sku}}</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"product-item__stock\">\r\n              <div class=\"product-item__stock-storage\">\r\n                <span class=\"caption\">Москва:</span><span class=\"label-2\">116 000</span>\r\n              </div>\r\n              <div class=\"product-item__stock-storage\">\r\n                <span class=\"caption\">С.Петерб:</span\r\n                ><span class=\"label-2\">116 000</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"input-container input-container--quantity\">\r\n              <div class=\"input-field quantity-input\">\r\n                <button class=\"quantity-control\" data-action=\"minus\">\r\n                  <svg\r\n                    width=\"20\"\r\n                    height=\"20\"\r\n                    viewBox=\"0 0 20 20\"\r\n                    fill=\"none\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M5.28516 10H14.7132\"\r\n                      stroke=\"#323232\"\r\n                      stroke-width=\"1.5\"\r\n                      stroke-linecap=\"round\"\r\n                      stroke-linejoin=\"round\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n                <input type=\"number\" class=\"quantity-value\" value=\"100000\" />\r\n                <button class=\"quantity-control\" data-action=\"plus\">\r\n                  <svg\r\n                    width=\"20\"\r\n                    height=\"20\"\r\n                    viewBox=\"0 0 20 20\"\r\n                    fill=\"none\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M5.28516 10H14.7132\"\r\n                      stroke=\"#323232\"\r\n                      stroke-width=\"1.5\"\r\n                      stroke-linecap=\"round\"\r\n                      stroke-linejoin=\"round\"\r\n                    />\r\n                    <path\r\n                      d=\"M9.9992 5.28595V14.714\"\r\n                      stroke=\"#323232\"\r\n                      stroke-width=\"1.5\"\r\n                      stroke-linecap=\"round\"\r\n                      stroke-linejoin=\"round\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"product-item__price number-1\">2 250 000 ₽</div>\r\n\r\n            <button class=\"btn btn--icon-only--large btn--dark\">\r\n              <svg\r\n                width=\"20\"\r\n                height=\"20\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  d=\"M5.96905 6.625L5.30205 3.625H3.37305\"\r\n                  stroke=\"currentColor\"\r\n                  stroke-width=\"1.5\"\r\n                  stroke-linecap=\"round\"\r\n                  stroke-linejoin=\"round\"\r\n                />\r\n                <path\r\n                  fill-rule=\"evenodd\"\r\n                  clip-rule=\"evenodd\"\r\n                  d=\"M7.73099 14.835L5.96899 6.625H18.627C19.264 6.625 19.738 7.212 19.605 7.835L18.103 14.835C18.004 15.296 17.597 15.625 17.125 15.625H8.70799C8.23699 15.625 7.82999 15.296 7.73099 14.835Z\"\r\n                  stroke=\"currentColor\"\r\n                  stroke-width=\"1.5\"\r\n                  stroke-linecap=\"round\"\r\n                  stroke-linejoin=\"round\"\r\n                />\r\n                <path\r\n                  d=\"M17.465 19.25C17.258 19.25 17.09 19.418 17.092 19.625C17.092 19.832 17.26 20 17.467 20C17.674 20 17.842 19.832 17.842 19.625C17.841 19.418 17.673 19.25 17.465 19.25\"\r\n                  stroke=\"currentColor\"\r\n                  stroke-width=\"1.5\"\r\n                  stroke-linecap=\"round\"\r\n                  stroke-linejoin=\"round\"\r\n                />\r\n                <path\r\n                  d=\"M8.85605 19.25C8.64905 19.25 8.48105 19.418 8.48305 19.625C8.48205 19.832 8.65005 20 8.85705 20C9.06405 20 9.23205 19.832 9.23205 19.625C9.23205 19.418 9.06405 19.25 8.85605 19.25\"\r\n                  stroke=\"currentColor\"\r\n                  stroke-width=\"1.5\"\r\n                  stroke-linecap=\"round\"\r\n                  stroke-linejoin=\"round\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </li>\r\n        </ul>\r\n        <Pagination :pagination=\"pagination\" @update-page=\"setPage\"/>\r\n      </div>\r\n      <div v-else class=\"product-list-empty\">\r\n          Найдено 0 товаров\r\n      </div>\r\n    </div>    \r\n  `,\r\n};\r\n","import { debounce } from 'lodash';\r\nimport './Search.css';\r\n\r\nexport const Search = {\r\n  props: {\r\n    query: String,\r\n  },\r\n  emits: ['updateQuery'],\r\n  data() {\r\n    return {\r\n      searchQuery: '',\r\n    };\r\n  },\r\n  watch: {\r\n    searchQuery() {\r\n      this.debouncedSearch();\r\n    },\r\n  },\r\n  methods: {\r\n    search() {\r\n      if (this.searchQuery !== this.query) {\r\n        this.$emit('updateQuery', this.searchQuery);\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.debouncedSearch = debounce(this.search, 300);\r\n  },\r\n  unmounted() {\r\n    this.debouncedSearch.cancel();\r\n  },\r\n  template: `\r\n    <div class=\"catalog-search\">\r\n      <input\r\n        type=\"search\"\r\n        class=\"catalog-search__input input-field input-search input-search--tall\"\r\n        v-model.trim=\"searchQuery\"\r\n      />\r\n      <button class=\"catalog-search__submit btn btn--dark btn--text--large\" @click=\"debouncedSearch\">\r\n        Найти\r\n      </button>\r\n    </div>\r\n  `,\r\n};\r\n","import './Select.css';\r\n\r\nexport const Select = {\r\n  props: {\r\n    options: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  emits: ['updateSelect'],\r\n  data() {\r\n    return {\r\n      selectedOptionValue: null,\r\n      selectedOptionOrder: null,\r\n      selectedOptionName: null,\r\n      isOpen: false,\r\n    };\r\n  },\r\n  computed: {\r\n    getOption() {\r\n      return this.selectedOptionValue || 'По умолчанию';\r\n    },\r\n  },\r\n  methods: {\r\n    toggleOption(option) {\r\n      if (this.selectedOptionName == option.name) {\r\n        this.isOpen = false;\r\n        return;\r\n      }\r\n      console.log(option);\r\n      this.selectedOptionName = option.name;\r\n      this.selectedOptionValue = option.value;\r\n      this.selectedOptionOrder = option.order;\r\n      this.$emit('updateSelect', option);\r\n      this.isOpen = false;\r\n    },\r\n    toggleSelect() {\r\n      this.isOpen = !this.isOpen;\r\n    },\r\n    getOrderType(order = '') {\r\n      return order === 'asc' ? 'v-select__order-icon--rotate' : '';\r\n    },\r\n    handleClickOutside(event) {\r\n      if (!this.$refs.select.contains(event.target)) {\r\n        this.isOpen = false;\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    document.addEventListener('click', this.handleClickOutside);\r\n  },\r\n  unmounted() {\r\n    document.removeEventListener('click', this.handleClickOutside);\r\n  },\r\n  template: `\r\n    <div class=\"v-select v-select--small\" :class=\"{'v-select--active': isOpen}\" ref=\"select\">\r\n      <button class=\"v-select__trigger\" :class=\"{'v-select__trigger--active': isOpen}\" aria-haspopup=\"listbox\" @click=\"toggleSelect\">\r\n        {{getOption}}\r\n        <svg v-if=\"selectedOptionOrder\" :class=\"getOrderType(selectedOptionOrder)\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n          <path d=\"M12 5V19\" stroke=\"#323232\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          <path d=\"M6.99902 9.99905L12 4.99805L17.001 9.99905\" stroke=\"#323232\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n        </svg>\r\n      </button>\r\n      <Transition name=\"select-fade-slide\">\r\n        <ul v-show=\"isOpen\" class=\"v-select__options\" role=\"listbox\">\r\n          <li\r\n            class=\"v-select__option\"\r\n            :class=\"{'v-select__option--selected': selectedOptionName === option.name}\"\r\n            role=\"option\"\r\n            v-for=\"option in options\"\r\n            :key=\"option.name\"\r\n            @click=\"toggleOption(option)\"\r\n          >\r\n            {{option.value}}\r\n            <svg v-if=\"option.order\" :class=\"getOrderType(option.order)\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n              <path d=\"M12 5V19\" stroke=\"#323232\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n              <path d=\"M6.99902 9.99905L12 4.99805L17.001 9.99905\" stroke=\"#323232\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n            </svg>            \r\n            <svg v-if=\"selectedOptionName === option.name\" class=\"v-select__active-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n              <path d=\"M20 6.5L9 17.5L4 12.5\" stroke=\"#323232\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n            </svg>\r\n          </li>\r\n        </ul>\r\n      </Transition>\r\n    </div>\r\n  `,\r\n};\r\n","import { mapActions, mapState } from 'ui.vue3.pinia';\r\nimport { useCatalogStore } from '../../store/store';\r\nimport { Filter } from '../Filter/Filter';\r\nimport { ProductList } from '../ProductList/ProductList';\r\nimport { Search } from '../Search/Search';\r\nimport { Select } from '../Select/Select';\r\nimport './CatalogPage.css';\r\n\r\nexport const CatalogPage = {\r\n  components: {\r\n    ProductList,\r\n    Search,\r\n    Filter,\r\n    Select,\r\n  },\r\n  props: {\r\n    params: {\r\n      type: Object,\r\n      default: () => ({}),\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState(useCatalogStore, ['query', 'filter', 'sorting']),\r\n  },\r\n  methods: {\r\n    ...mapActions(useCatalogStore, ['setQuery', 'setSort', 'setFliters']),\r\n  },\r\n  template: `\r\n    <div class=\"catalog-page\">\r\n      <Search class=\"catalog-page__search\" :query=\"query\" @update-query=\"setQuery\"/>\r\n      <div class=\"catalog-page__header-container\">\r\n        <h1>Каталог</h1>\r\n        <Select :options=\"sorting.sort\" @update-select=\"setSort\"/>\r\n      </div>\r\n      <Filter class=\"catalog-page__filter\" :filters=\"filter.characteristics\" @update-filters=\"setFliters\"/>\r\n      <ProductList />\r\n    </div>\r\n  `,\r\n};\r\n","import { BitrixVue } from 'ui.vue3';\r\nimport { mapActions } from 'ui.vue3.pinia';\r\nimport { CatalogPage } from './components/CatalogPage/CatalogPage';\r\nimport { store, useCatalogStore } from './store/store';\r\n\r\nexport class CatalogApp {\r\n  #app;\r\n  #data;\r\n\r\n  constructor(rootNode, data) {\r\n    this.rootNode = document.querySelector(rootNode);\r\n    this.#data = data;\r\n  }\r\n\r\n  init() {\r\n    this.initApp();\r\n  }\r\n\r\n  initApp() {\r\n    const context = this;\r\n\r\n    this.#app = BitrixVue.createApp({\r\n      name: 'CatalogApp',\r\n      components: {\r\n        CatalogPage,\r\n      },\r\n      data() {\r\n        return {\r\n          params: context.#data,\r\n        };\r\n      },\r\n      methods: {\r\n        ...mapActions(useCatalogStore, ['fetchCatalog']),\r\n      },\r\n      beforeCreate() {\r\n        this.$bitrix.Application.set(context);\r\n      },\r\n      created() {\r\n        this.fetchCatalog();\r\n      },\r\n      template: `<CatalogPage :params='params'/>`,\r\n    });\r\n    this.#app.use(store);\r\n    this.#app.mount(this.rootNode);\r\n  }\r\n}\r\n"],"names":["store","createPinia","useCatalogStore","defineStore","state","query","products","filter","filters","brands","delivery","sorting","sort","pagination","currentPage","loading","getters","getParams","page","actions","fetchCatalog","params","url","buildUrl","console","log","fetch","responce","json","data","items","URLSearchParams","append","Object","keys","join","toString","setQuery","setPage","setSort","option","name","setFliters","Accordion","isOpen","methods","toggleAccordeon","template","Filter","components","props","type","emits","selectedFilters","onSelectFilter","key","value","applyFilters","$emit","Pagination","onChangePage","totalPages","ProductList","computed","mapState","mapActions","Search","String","searchQuery","watch","debouncedSearch","search","created","debounce","unmounted","cancel","Select","options","Array","selectedOptionValue","selectedOptionOrder","selectedOptionName","getOption","toggleOption","order","toggleSelect","getOrderType","handleClickOutside","event","$refs","select","contains","target","mounted","document","addEventListener","removeEventListener","CatalogPage","CatalogApp","rootNode","querySelector","initApp","context","BitrixVue","createApp","beforeCreate","$bitrix","Application","set","use","mount"],"mappings":"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"}